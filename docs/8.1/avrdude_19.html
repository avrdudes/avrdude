<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html401/loose.dtd">
<html>
<!-- Created on June 23, 2025 by texi2html 1.82
texi2html was written by: 
            Lionel Cons <Lionel.Cons@cern.ch> (original author)
            Karl Berry  <karl@freefriends.org>
            Olaf Bachmann <obachman@mathematik.uni-kl.de>
            and many others.
Maintained by: Many creative people.
Send bugs and suggestions to <texi2html-bug@nongnu.org>
-->
<head>
<title>AVRDUDE: 5. Autogenerated files</title>

<meta name="description" content="AVRDUDE: 5. Autogenerated files">
<meta name="keywords" content="AVRDUDE: 5. Autogenerated files">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="texi2html 1.82">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
<!--
a.summary-letter {text-decoration: none}
blockquote.smallquotation {font-size: smaller}
pre.display {font-family: serif}
pre.format {font-family: serif}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
pre.smalldisplay {font-family: serif; font-size: smaller}
pre.smallexample {font-size: smaller}
pre.smallformat {font-family: serif; font-size: smaller}
pre.smalllisp {font-size: smaller}
span.roman {font-family:serif; font-weight:normal;}
span.sansserif {font-family:sans-serif; font-weight:normal;}
ul.toc {list-style: none}
body { background-color: #ffd; }
h1 { text-shadow: .05em .05em #ccc; }
table {
  border: 3px solid #ccf;
  background-color: white;
}
div.smallexample {
  background-color: #dfd;
  border: 3px solid #cfc;
}
div.example {
  background-color: #dfd;
  border: 3px solid #cfc;
}
samp {
  color: blue;
}
code {
  color: green;
}

-->
</style>


</head>

<body lang="en" bgcolor="#FFFFFF" text="#000000" link="#0000FF" vlink="#800080" alink="#FF0000">

<a name="Autogenerated-Files"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="avrdude_18.html#Other-Notes" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="avrdude_20.html#Programmer-Specific-Information" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="avrdude_11.html#Configuration-Files" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="avrdude.html#Top" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="avrdude_20.html#Programmer-Specific-Information" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="avrdude.html#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="avrdude_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="avrdude_51.html#Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="avrdude_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<hr size="1">
<a name="index-Autogenerated-files"></a>
<a name="index-urboot_003a_002e_002e_002e"></a>
<a name="Autogenerated-files"></a>
<h1 class="chapter">5. Autogenerated files</h1>

<p>Autogenerated files are <em>virtual</em> read-only files that do
not exist externally but that are provided by AVRDUDE instead. They have
the form <var>prefix</var><code>:</code><var>parameters</var> and can be used to write the
contents of memory. The <var>prefix</var> tells AVRDUDE which sort of file to
generate while the part after the colon is usually an underscore-separated
list of parameters that determines the contents of the autogenerated file.
</p>
<p>Currently, the only autogenerated files are urboot bootloaders from the
<a href="https://github.com/stefanrueger/urboot">https://github.com/stefanrueger/urboot</a> project. They take the form
<code>urboot:</code><var>features</var>. Bootloader features are specified using an
underscore-separated list in arbitrary order, eg,
<code>urboot:autobaud_2s</code>. For a complete list of possible features see
below. The following example writes a suitable autobaud bootloader to the
flash of an ATmega328P target:
</p>
<table><tr><td>&nbsp;</td><td><table class="cartouche" border="1"><tr><td>
<pre class="smallexample">$ avrdude -c dryrun -p m328p -U urboot:autobaud
Reading 260 bytes for flash from input file urboot:autobaud
Writing 260 bytes to flash
Writing | ################################################## | 100% 0.00 s
Reading | ################################################## | 100% 0.00 s
260 bytes of flash verified
Setting fuses for bootloader urboot:autobaud

Avrdude done.  Thank you.
</pre></td></tr></table>
</td></tr></table>

<p>Autogenerated bootloaders can be used in the terminal as well:
</p>
<table><tr><td>&nbsp;</td><td><table class="cartouche" border="1"><tr><td>
<pre class="smallexample">$ avrdude -c dryrun -p m328p -t
avrdude&gt; write flash urboot:autobaud
Caching | ################################################## | 100% 0.00 s

avrdude&gt; quit
Synching cache to device ...
Writing | ################################################## | 100% 0.00 s

Avrdude done.  Thank you.
</pre></td></tr></table>
</td></tr></table>

<p>Note that using <code>urboot:...</code> in <code>-U</code> options has the desired
side effect of also setting all necessary fuse configurations for the
bootloader to work correctly. This does <em>not</em> happen when using the
terminal <code>write</code> command, where the necessary fuse configurations
need to be requested manually.
</p>


<p>The terminal mode is great for exploring possible bootloaders
interactively:
</p>
<table><tr><td>&nbsp;</td><td><table class="cartouche" border="1"><tr><td>
<pre class="smallexample">$ avrdude -c dryrun -p m328p -t
avrdude&gt; write flash urboot:autobaud_list
   Selection Size Use Vers Features  Type               Canonical file name
         _pr *256 256 u8.0 w---jPra- vector/spmready    urboot_m328p_1s_autobaud_u...
   _ee_ce_pr *378 384 u8.0 weU-jPrac vector/spmready    urboot_m328p_1s_autobaud_u...
   _ee_u4_pr  372 384 u8.0 weU-jPra- vector/spmready    urboot_m328p_1s_autobaud_u...
   _ce_u4_pr  362 384 u8.0 w-U-jPrac vector/spmready    urboot_m328p_1s_autobaud_u...
      _u4_pr  316 384 u8.0 w-U-jPra- vector/spmready    urboot_m328p_1s_autobaud_u...
_ee_ce_u4_hw *400 512 u8.0 weU-hprac hardware-supported urboot_m328p_1s_autobaud_u...
_ee_ce_u4_pr  414 512 u8.0 weU-jPrac vector/spmready    urboot_m328p_1s_autobaud_u...
   _ee_u4_hw  354 512 u8.0 weU-hpra- hardware-supported urboot_m328p_1s_autobaud_u...
</pre></td></tr></table>
</td></tr></table>

<p>The <code>list</code> feature does not generate the bootloader code but instead
interactively lists possible selections. In above example, the last column
is cut off for space reasons. Using successively <code>ee</code> (provide a
bootloader with EEPROM r/w capability), <code>ce</code> (add chip erase
emulation code to the generated bootloader) and <code>u4</code> (generate code
skipping all redundant flash page writes and page erases to wear out the
flash memory less and speed up the bootloading process) will then
iteratively reduce the available selection:
</p>
<table><tr><td>&nbsp;</td><td><table class="cartouche" border="1"><tr><td>
<pre class="smallexample">avrdude&gt; write flash urboot:autobaud_list_ee
Selection Size Use Vers Features  Type               Canonical file name
   _ce_pr *378 384 u8.0 weU-jPrac vector/spmready    urboot_m328p_1s_autobaud_uart...
   _u4_pr  372 384 u8.0 weU-jPra- vector/spmready    urboot_m328p_1s_autobaud_uart...
_ce_u4_hw *400 512 u8.0 weU-hprac hardware-supported urboot_m328p_1s_autobaud_uart...
_ce_u4_pr  414 512 u8.0 weU-jPrac vector/spmready    urboot_m328p_1s_autobaud_uart...
   _u4_hw  354 512 u8.0 weU-hpra- hardware-supported urboot_m328p_1s_autobaud_uart...

avrdude&gt; write flash urboot:autobaud_list_ee_ce
Select Size Use Vers Features  Type               Canonical file name
   _pr *378 384 u8.0 weU-jPrac vector/spmready    urboot_m328p_1s_autobaud_uart0_r...
_u4_hw *400 512 u8.0 weU-hprac hardware-supported urboot_m328p_1s_autobaud_uart0_r...
_u4_pr  414 512 u8.0 weU-jPrac vector/spmready    urboot_m328p_1s_autobaud_uart0_r...

avrdude&gt; write flash urboot:autobaud_list_ee_ce_u4
Sel Size Use Vers Features  Type               Canonical file name
_hw *400 512 u8.0 weU-hprac hardware-supported urboot_m328p_1s_autobaud_uart0_rxd0...
_pr  414 512 u8.0 weU-jPrac vector/spmready    urboot_m328p_1s_autobaud_uart0_rxd0...
</pre></td></tr></table>
</td></tr></table>

<p>In all lists the starred bootloaders are those that are the most
feature-rich given the available used flash space, which &mdash; out of necessity &mdash;
must be a multiple of flash pages or minimal boot section. These can be
selected with the <code>best</code> feature. The <code>show</code> feature displays
the properties of the bootloader that would be written without actually
writing it; removing <code>show</code> will then write the bootloader to flash
and, using <code>-U</code>, also set the necessary fuses:
</p>
<table><tr><td>&nbsp;</td><td><table class="cartouche" border="1"><tr><td>
<pre class="smallexample">$ avrdude -qq -c dryrun -p m328p -U urboot:autobaud_show_best_ee
378 384 u8.0 weU-jPrac vector/spmready urboot_m328p_1s_autobaud_uart0_rxd0_txd1_no...

$ avrdude -qq -c dryrun -p m328p -U urboot:autobaud_best_ee &amp;&amp; echo OK
OK
</pre></td></tr></table>
</td></tr></table>

<p>Like the urboot project AVRDUDE currently only provides bootloaders for classic parts.
The following table lists possible features.
</p>
<table>
<tr><td><code>2s</code></td><td>WDT timeout: <code>250ms</code>, <code>500ms</code>, <code>1s</code> (default), <code>2s</code>, <code>4s</code> or <code>8s</code> (*0)</td></tr>
<tr><td><code>autobaud</code></td><td>Bootloader adapts to host baud rate within MCU capability (*1)</td></tr>
<tr><td><code>uart&lt;n&gt;</code></td><td>Hardware UART number, eg, <code>uart0</code> (default), <code>uart1</code>, ...</td></tr>
<tr><td><code>alt&lt;n&gt;</code></td><td>Alternative UART I/O lines (*2)</td></tr>
<tr><td><code>9.6kbaud</code></td><td>Or other reasonable baud rates; also accepting <code>baud</code> unit</td></tr>
<tr><td><code>16MHz</code></td><td>Or other CPU frequencies; also accepting <code>kHz</code> and <code>Hz</code> units</td></tr>
<tr><td><code>[xa-q]</code></td><td>Optional F_CPU prefix designator, eg, <code>i9.2MHz</code> (*3)
                               <br>&nbsp;&nbsp;- <code>x</code>: external oscillator (default)
                               <br>&nbsp;&nbsp;- <code>i</code>: internal oscillator
                               <br>&nbsp;&nbsp;- <code>[a-h]</code>: internal oscillator that is 10% (<code>a</code>) to 1.25% (<code>h</code>) slow
                               <br>&nbsp;&nbsp;- <code>[j-q]</code>: internal oscillator that is 1.25% (<code>j</code>) to 10% (<code>q</code>) fast</td></tr>
<tr><td><code>swio</code></td><td>Software I/O, must specify <code>rx</code> and <code>tx</code> pins</td></tr>
<tr><td><code>rx[a-h][0-7]</code></td><td>MCU receive pin for <code>swio</code>, eg, <code>rxb0</code></td></tr>
<tr><td><code>tx[a-h][0-7]</code></td><td>MCU transfer pin for <code>swio</code>, eg, <code>txb1</code></td></tr>
<tr><td><code>lednop</code></td><td>If no LED is specified generate template bootloader</td></tr>
<tr><td><code>no-led/noled</code></td><td>Drop blinking code unless a LED is specified</td></tr>
<tr><td><code>led[+-][a-h][0-7]</code></td><td>Generate code for activity LED with polarity +/-, eg, <code>led+b5</code></td></tr>
<tr><td><code>dual</code></td><td>Dual boot; must specify CS pin for external SPI flash (*4)</td></tr>
<tr><td><code>cs[a-h][0-7]</code></td><td>Chip select pin for dual boot, eg, <code>csd5</code></td></tr>
<tr><td><code>hw</code></td><td>Generate bootloader with hardware boot section (*5)</td></tr>
<tr><td><code>v&lt;n&gt;</code></td><td>Optional vector for vector bootloader, eg, <code>v25</code> or <code>vspmready</code></td></tr>
<tr><td><code>ee</code></td><td>Generate bootloader with EEPROM r/w support</td></tr>
<tr><td><code>ce</code></td><td>Generate bootloader that can emulate a chip erase</td></tr>
<tr><td><code>pr</code></td><td>Generate vector bootloader with reset vector protection (*6)</td></tr>
<tr><td><code>u1</code></td><td>Generate bootloader that skips redundant flash page writes (*7,8)</td></tr>
<tr><td><code>u2</code></td><td>... and skips redundant flash page erases during emulated CE (*7,8)</td></tr>
<tr><td><code>u3</code></td><td>... and skips not needed flash page erases during page write (*7,8)</td></tr>
<tr><td><code>u4</code></td><td>... and skips empty flash page writes after page erase (*8)</td></tr>
<tr><td><code>serialno=abc123</code></td><td>Put serial number, eg, <code>abc123</code>, in top of unused bootloader flash</td></tr>
<tr><td><code>fill=urboot\x20</code></td><td>Fill otherwise unused bootloader flash repeatedly with argument</td></tr>
<tr><td><code>save=myfile.hex</code></td><td>Save bootloader to file with chosen name (*9)</td></tr>
<tr><td><code>save</code></td><td>Save bootloader to file with canonical file name (*9)</td></tr>
<tr><td><code>tags=myfile.tag</code></td><td>Save symbols to tag file with chosen name (*9)</td></tr>
<tr><td><code>tags</code></td><td>Save symbols to tag file with canonical file name (*9)</td></tr>
<tr><td><code>configs</code></td><td>Show needed fuse configuration but do not write to memories</td></tr>
<tr><td><code>show</code></td><td>Show bootloader features but do not write to flash</td></tr>
<tr><td><code>list</code></td><td>List possible bootloader configurations but do not write to flash</td></tr>
<tr><td><code>best</code></td><td>Select smallest feature-rich bootloader (first in list) and, if
                                    the baud rate error is too high for UART, switch to <code>swio</code></td></tr>
<tr><td><code>help</code></td><td>Show this help message and return</td></tr>
</table>

<p><strong>Notes.</strong> Features can also be specified like in elements of a canonical file name.
For details on urboot bootloaders and their features see <a href="https://github.com/stefanrueger/urboot">https://github.com/stefanrueger/urboot</a>.
</p><table>
<tr><td>*0</td><td>Some parts do not provide 4 s or 8 s watchdog timeout</td></tr>
<tr><td>*1</td><td><code>autobaud</code> only works with UART I/O where the RX port pin is bit-addressable</td></tr>
<tr><td>*2</td><td>From classic parts, only ATtiny441/841 have alternate UART signals</td></tr>
<tr><td>*3</td><td>There is a subtle difference between external oscillators (<code>x</code>), which are
              reasonably accurate, and internal oscillators (<code>a</code>...<code>h</code>, <code>i</code>,
              <code>j</code>...<code>q</code>), which tend to be inaccurate for classic parts. The former can
              afford higher baud rate errors up to 2.2% while for the latter AVRDUDE warns at the
              lower threshold of 0.7% baud rate error. Cassic UARTs have integer baud rate
              divisors, which can lead to high baud rate quantisation errors. Used with the feature
              <code>best</code> AVRDUDE can automagically replace UART I/O code with <code>swio</code>
              I/O code when the former exhibits too high baud rate errors. For that, AVRDUDE better
              knows the type of oscillator (<code>x</code> or <code>i</code>) that drives a board. For lowest
              baud rate errors on an individual board that runs on internal oscillators it is best
              to measure F_CPU and use the measured value with the <code>i</code> prefix. Alternatively,
              one can use the nominal internal F_CPU (say 8 MHz) and use prefix letters that
              make the bootloader work: depending on the letter AVRDUDE subtracts from or adds to
              the nominal F_CPU multiples of 1.25%.</td></tr>
<tr><td>*4</td><td>Dual boot is not supported for parts that lack standard SPI communication</td></tr>
<tr><td>*5</td><td>Not all parts provide hardware bootloader support; <code>hw</code> renders <code>pr</code> meaningless</td></tr>
<tr><td>*6</td><td>Reset vector protection is only available if flash size is a power of 2 (not ATmega406)</td></tr>
<tr><td>*7</td><td><code>u1</code>...<code>u3</code> is only advisory, ie, can result in any of <code>u1</code>...<code>u4</code></td></tr>
<tr><td>*8</td><td><code>u1</code>...<code>u4</code> is not available for parts with the 4-page-erase quirk</td></tr>
<tr><td>*9</td><td>The file is still written to disk in connection with <code>configs</code>, <code>show</code> or
              <code>list</code>. Bootloader files are per default written as Intel Hex format with
              comments. A filename of <code>-</code> writes the file to <code>stdout</code>. If a bootloader
              is a vector bootloader then the bootloader file contains a segment for
              initialising the reset vector to point to the bootloader. Tag files can be used in
              connection with the terminal <code>disasm</code> command.</td></tr>
</table>

<br><p>Baud rate quantification errors are displayed with <code>-v</code>. A 0.79% baud
rate error is considered OK for external oscillators but too high for
internal oscillators. Hence, AVRDUDE selects software I/O when neither
<code>uart</code> nor <code>swio</code> are explicitly requested:
</p>
<table><tr><td>&nbsp;</td><td><table class="cartouche" border="1"><tr><td>
<pre class="smallexample">$ avrdude -qv -c dryrun -p m328p -U urboot:x8mhz_56kbaud |&amp; grep -i baud.rate
Baud rate error -0.79% for external oscillator OK

$ avrdude -qv -c dryrun -p m328p -U urboot:i8mhz_56kbaud |&amp; grep -i baud.rate
Switching to SWIO as baud rate error -0.79% too high for internal oscillator
Baud rate error -0.10% for internal oscillator OK
</pre></td></tr></table>
</td></tr></table>

<p>There is a warning when the user requests hardware UART I/O:
</p>
<table><tr><td>&nbsp;</td><td><table class="cartouche" border="1"><tr><td>
<pre class="smallexample">$ avrdude  -qvc dryrun -p m328p -U urboot:i8mhz_56kbaud_uart0 |&amp; grep -i baud.rate
Warning: high baud rate error -0.79% for int oscillator: consider switching to swio
</pre></td></tr></table>
</td></tr></table>

<p>Requesting <code>best</code> makes AVRDUDE switch to <code>swio</code> when UART quatisation errors are considered too high:
</p>
<table><tr><td>&nbsp;</td><td><table class="cartouche" border="1"><tr><td>
<pre class="smallexample">$ avrdude -qvc dryrun -p m328p -U urboot:i8mhz_56kbaud_uart0_best |&amp; grep -i baud.rat
Switching to SWIO as baud rate error -0.79% too high for internal oscillator
Baud rate error -0.10% for internal oscillator OK
</pre></td></tr></table>
</td></tr></table>

<p>Alternatively, the user can request <code>swio</code> on those <code>rx</code>/<code>tx</code> lines that the UART uses:
</p>
<table><tr><td>&nbsp;</td><td><table class="cartouche" border="1"><tr><td>
<pre class="smallexample">$ avrdude -qvc dryrun -p m328p -U urboot:i8mhz_56kbaud_uart0_swio |&amp; grep -i baud.rat
Baud rate error -0.10% for internal oscillator OK
</pre></td></tr></table>
</td></tr></table>

<p>Tag files can be used in connection with <code>disasm</code>:
</p>
<table><tr><td>&nbsp;</td><td><table class="cartouche" border="1"><tr><td>
<pre class="smallexample">$ avrdude -qqc dryrun -p m328p -U urboot:m328p_autobaud_ee_tags=/tmp/x \
    -T &quot;disasm -gt=/tmp/x flash 0 -1&quot;

[...]
        .equ    io.mcusr,   0x34
        .equ    io.spmcsr,  0x37
        .equ    mem.wdtcsr, 0x60
[...]
        .text
main:
__vector_reset:
L0000:  rjmp    .-386                ; L7e80 (urboot)

urmarker:                            ; Urboot marker bytes
L0002:  .byte   0x75, 0x72           ; ur

L0004:  .fill   16190, 2, 0xffff

; Rjmp from L0000
urboot:                              ; Entry point for bootloader
L7e80:  clr     r1
L7e82:  in      r2, io.mcusr
L7e84:  out     io.mcusr, r1
L7e86:  ldi     r24, 0x00            ; 0
L7e88:  rcall   set_watchdog         ; L7f5c
L7e8a:  sbrs    r2, 1                ; Bit 1 = 0x02
application:
L7e8c:  rjmp    .+470                ; L0064 (__vector_spm_ready)
serial_boot:                         ; Serial port bootloading
L7e8e:  ldi     r24, 0x0e            ; 14
L7e90:  rcall   set_watchdog         ; L7f5c

[...]

Label27:
L7fea:  clr     r1
L7fec:  ret

unused:                              ; 12 bytes for _serialno= and/or _fill=
L7fee:  .fill   6, 2, 0xffff

npages_vecnum:                       ; Usage of 3 pages; vector/spmready bootloader
L7ffa:  .byte   0x03, 0x19           ; __

L7ffc:  rjmp    pgm_write_page       ; L7f78

features_version:                    ; Encodes u8.0 weU-jPra-
L7ffe:  .byte   0xe6, 0x40           ; _&nbsp;</pre></td></tr></table>
</td></tr></table>




<hr size="1">
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="avrdude_18.html#Other-Notes" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="avrdude_20.html#Programmer-Specific-Information" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="avrdude_11.html#Configuration-Files" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="avrdude.html#Top" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="avrdude_20.html#Programmer-Specific-Information" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="avrdude.html#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="avrdude_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="avrdude_51.html#Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="avrdude_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<p>
 <font size="-1">
  This document was generated on <i>June 23, 2025</i> using <a href="http://www.nongnu.org/texi2html/"><i>texi2html 1.82</i></a>.
 </font>
 <br>

</p>
</body>
</html>
